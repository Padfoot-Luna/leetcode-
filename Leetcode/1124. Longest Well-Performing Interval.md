`Middle`

> ç»™ä½ ä¸€ä»½å·¥ä½œæ—¶é—´è¡¨ hoursï¼Œä¸Šé¢è®°å½•ç€æŸä¸€ä½å‘˜å·¥æ¯å¤©çš„å·¥ä½œå°æ—¶æ•°ã€‚
>
> æˆ‘ä»¬è®¤ä¸ºå½“å‘˜å·¥ä¸€å¤©ä¸­çš„å·¥ä½œå°æ—¶æ•°å¤§äº 8 å°æ—¶çš„æ—¶å€™ï¼Œé‚£ä¹ˆè¿™ä¸€å¤©å°±æ˜¯ã€ŒåŠ³ç´¯çš„ä¸€å¤©ã€ã€‚
>
> æ‰€è°“ã€Œè¡¨ç°è‰¯å¥½çš„æ—¶é—´æ®µã€ï¼Œæ„å‘³åœ¨è¿™æ®µæ—¶é—´å†…ï¼Œã€ŒåŠ³ç´¯çš„å¤©æ•°ã€æ˜¯ä¸¥æ ¼ å¤§äºã€Œä¸åŠ³ç´¯çš„å¤©æ•°ã€ã€‚
>
> è¯·ä½ è¿”å›ã€Œè¡¨ç°è‰¯å¥½æ—¶é—´æ®µã€çš„æœ€å¤§é•¿åº¦ã€‚
>
> **æç¤ºï¼š**
>
> - `1 <= hours.length <= 10000`
> - `0 <= hours[i] <= 16`

#### 1.  æš´åŠ› ğŸ¤¬ğŸ¤¬ğŸ¤¬ğŸ¤¬ğŸ¤¬ğŸ¤¬ğŸ¤¬ğŸ¤¬ğŸ¤¬

```python
class Solution:
    def longestWPI(self, hours: List[int]) -> int:
        ans = 0
        for i in range(len(hours)):
            hours[i] = -1 if hours[i] <= 8 else 1
        for i in range(len(hours)):
            cur = 0
            for j in range(i,len(hours)):
                cur += hours[j]
                if cur > 0:
                    ans = max(ans, j-i+1)
        return ans
```

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$

---

#### 2. presum + momotonic stack :sob:

```python
class Solution:
    def longestWPI(self, hours: List[int]) -> int:
        n = len(hours)
        hours = [0] + hours
        for i in range(1,n+1):
            hours[i] = 1 if hours[i]>8 else -1
            hours[i] += hours[i-1]   # å‰ç¼€å’Œ

        ans = 0
        stack = []
        for i in range(n+1):
            if not stack or hours[stack[-1]] > hours[i]:
                stack.append(i)   # ç´¢å¼•å¯¹åº”çš„å€¼å•è°ƒé€’å‡
        i = n  # å€’åºï¼Œä»å°åˆ°å¤§
        while i > ans: 
            while stack and hours[stack[-1]] < hours[i]:
                ans = max(ans, i - stack[-1])
                stack.pop()
            i -= 1
        return ans
```



